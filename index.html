<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>ç‰¢www</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%; background: black; overflow: hidden;
    font-family: "Microsoft YaHei", sans-serif; color: white; touch-action: pan-y;
  }

  #videoWrapper {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000;
    transition: opacity 0.6s ease;
  }

  #videoPlayer {
    width: 100%; height: 100%; border: none; object-fit: cover;
    transition: opacity 0.4s ease;
  }

  #volumeBtn {
    position: fixed; top: 20px; left: 20px;
    width: 40px; height: 40px;
    border-radius: 50%;
    background: rgba(255,255,255,0.2);
    display: flex; justify-content: center; align-items: center;
    cursor: pointer; z-index: 1300;
    backdrop-filter: blur(8px);
    transition: background 0.2s, transform 0.2s;
  }

  #volumeBtn:hover { background: rgba(255,255,255,0.35); transform: scale(1.1); }
  #volumeIcon { font-size: 20px; display: inline-block; transition: transform 0.5s linear; }
  .rotate { animation: spin 2s linear infinite; }
  @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }

  #videoSelector {
    position: fixed; top: 50%; right: 20px; transform: translateY(-50%);
    display: flex; flex-direction: column; gap: 24px; z-index: 1200;
  }

  .videoBox {
    width: 180px; height: 120px; border-radius: 16px;
    backdrop-filter: blur(10px); background: rgba(255,255,255,0.1);
    display: flex; justify-content: center; align-items: center;
    cursor: pointer; overflow: hidden; transition: transform 0.2s, box-shadow 0.2s;
  }

  .videoBox:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(0,255,255,0.7); }
  .videoBox img { width: 100%; height: 100%; object-fit: cover; border-radius: 16px; }

  #progressContainer {
    position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
    width: 60%; height: 8px; background: rgba(255,255,255,0.2);
    border-radius: 4px; z-index: 1400; cursor: pointer;
  }

  #progressBar {
    width: 0%; height: 100%; background: #00aaff; border-radius: 4px;
    transition: width 0.1s linear;
  }

  #mainContent {
    display: none; height: 100vh; text-align: center;
    background: linear-gradient(135deg, #0f172a, #1e293b);
    animation: fadeIn 0.6s forwards; overflow-y: auto; -webkit-overflow-scrolling: touch;
  }

  @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
  h1 { padding-top: 20%; font-size: 3em; text-shadow: 0 0 20px #00aaff; }
  a { color: #00aaff; text-decoration: none; font-weight: bold; }
  #scrollHint {
    position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%);
    z-index: 1100; font-size: 16px; color: #fff; animation: hintPulse 2s infinite;
    transition: opacity 0.4s;
  }
  @keyframes hintPulse { 0%,100% { opacity: 0.25 } 50% { opacity: 1; transform: translate(-50%, -6px) } }
</style>
</head>
<body>
<div id="videoWrapper">
  <video id="videoPlayer" src="laow1.mp4" autoplay muted playsinline></video>
  <div id="volumeBtn"><span id="volumeIcon">ğŸ”‡</span></div>

  <div id="videoSelector">
    <div class="videoBox" data-src="laow1.mp4"><img src="thumb1.jpg"></div>
    <div class="videoBox" data-src="laow2.mp4"><img src="thumb2.jpg"></div>
    <div class="videoBox" data-src="wssp.mp4"><img src="ws.png"></div>
    <div class="videoBox" data-src="wssp.mp4"><img src="ws.png"></div>
  </div>

  <div id="progressContainer"><div id="progressBar"></div></div>
</div>

<div id="scrollHint">â†“ ä¸‹æ»‘è¿›å…¥ä¸»é¡µ</div>

<div id="mainContent">
  <h1>æ¬¢è¿æ¥åˆ° ç‰¢www çš„å®˜ç½‘ï¼</h1>
  <p>æˆ‘æ˜¯å­¦ç”ŸUPä¸»ï¼Œçƒ­çˆ±ç¼–ç¨‹ä¸åˆ›ä½œ ğŸ¬</p>
  <p><a href="https://space.bilibili.com/3537115203767153" target="_blank">è®¿é—®æˆ‘çš„Bilibiliä¸»é¡µ</a></p>
  <div style="height:1200px"></div>
</div>

<script>
const videoWrapper = document.getElementById('videoWrapper');
const main = document.getElementById('mainContent');
const scrollHint = document.getElementById('scrollHint');
const videoPlayer = document.getElementById('videoPlayer');
const boxes = document.querySelectorAll('.videoBox');
const volumeBtn = document.getElementById('volumeBtn');
const volumeIcon = document.getElementById('volumeIcon');
const progressContainer = document.getElementById('progressContainer');
const progressBar = document.getElementById('progressBar');

let showingMain = false;
let touchStartY = null;
const SWIPE_THRESHOLD = 60;
let isHolding = false;
let wasPlayingBeforeHold = true;

// --- é¡µé¢åˆ‡æ¢ ---
function showMain() {
  if(showingMain) return;
  showingMain = true;
  scrollHint.style.opacity = '0';
  setTimeout(()=>scrollHint.style.display='none',400);
  videoWrapper.style.opacity='0';
  setTimeout(()=>{
    videoWrapper.style.display='none';
    main.style.display='block';
    document.body.style.overflow='auto';
  },500);
}

function showVideo() {
  if(!showingMain) return;
  showingMain = false;
  scrollHint.style.display='block'; scrollHint.style.opacity='1';
  main.style.display='none';
  videoWrapper.style.display='flex';
  document.body.style.overflow='hidden';
  setTimeout(()=>videoWrapper.style.opacity='1',50);
}

// --- æ»šåŠ¨åˆ‡æ¢ ---
window.addEventListener('wheel', (e) => {
  if(Math.abs(e.deltaY) < 30) return;
  if(e.deltaY > 0 && !showingMain) showMain();
  if(e.deltaY < 0 && showingMain && window.scrollY <= 0) showVideo();
});

// --- è§¦æ§é•¿æŒ‰ 2å€é€Ÿ ---
window.addEventListener('touchstart', (e) => { 
  if(e.touches.length === 1) touchStartY = e.touches[0].clientY;
  wasPlayingBeforeHold = !videoPlayer.paused;
  isHolding = true;
  videoPlayer.playbackRate = 2;
});
window.addEventListener('touchend', (e) => {
  if(touchStartY === null) return;
  const diff = e.changedTouches[0].clientY - touchStartY;
  if(diff < -SWIPE_THRESHOLD && !showingMain) showMain();
  if(diff > SWIPE_THRESHOLD && showingMain && window.scrollY <= 0) showVideo();
  touchStartY = null;
  if(isHolding){
    videoPlayer.playbackRate = 1;
    isHolding = false;
    if(wasPlayingBeforeHold) videoPlayer.play();
  }
});

// --- é¼ æ ‡é•¿æŒ‰ 2å€é€Ÿ ---
window.addEventListener('mousedown', ()=>{
  wasPlayingBeforeHold = !videoPlayer.paused;
  isHolding = true;
  videoPlayer.playbackRate = 2;
});
window.addEventListener('mouseup', ()=>{
  if(isHolding){
    videoPlayer.playbackRate = 1;
    isHolding = false;
    if(wasPlayingBeforeHold) videoPlayer.play();
  }
});

// --- ç‚¹å‡»æš‚åœ/æ’­æ”¾ ---
function togglePlay(){ videoPlayer.paused ? videoPlayer.play() : videoPlayer.pause(); }
videoWrapper.addEventListener('click', togglePlay);
window.addEventListener('keydown', (e)=>{
  if(e.key===' ') { e.preventDefault(); togglePlay(); }
  if(e.key==='ArrowDown' && !showingMain) showMain();
  if(e.key==='ArrowUp' && showingMain && window.scrollY<=0) showVideo();
});

// --- ç‚¹å‡»æ–¹å—åˆ‡æ¢è§†é¢‘ ---
boxes.forEach(box=>{
  box.addEventListener('click', e=>{
    e.stopPropagation();
    const src = box.dataset.src;
    videoPlayer.style.opacity = "0";
    setTimeout(()=>{
      videoPlayer.pause();
      videoPlayer.src = src;
      videoPlayer.load();
      const playPromise = videoPlayer.play();
      if (playPromise !== undefined) {
        playPromise.catch(err => console.warn("æµè§ˆå™¨é˜»æ­¢è‡ªåŠ¨æ’­æ”¾ï¼Œç‚¹å‡»é™éŸ³åé‡è¯•", err));
      }
      setTimeout(()=> videoPlayer.style.opacity = "1",200);
    },200);
    boxes.forEach(b=>b.style.boxShadow="none");
    box.style.boxShadow="0 0 20px #00aaff";
  });
});

// --- éŸ³é‡æŒ‰é’® ---
volumeBtn.addEventListener('click', (e)=>{ 
  e.stopPropagation();
  videoPlayer.muted = !videoPlayer.muted;
  if(videoPlayer.muted){
    volumeIcon.textContent='ğŸ”‡';
    volumeIcon.classList.remove('rotate');
  } else {
    volumeIcon.textContent='ğŸ”Š';
    volumeIcon.classList.add('rotate');
  }
});

// --- è§†é¢‘è¿›åº¦æ¡ ---
videoPlayer.addEventListener('timeupdate', ()=>{
  const percent = (videoPlayer.currentTime / videoPlayer.duration) * 100;
  progressBar.style.width = percent + '%';
});
progressContainer.addEventListener('click', (e)=>{
  const rect = progressContainer.getBoundingClientRect();
  const clickX = e.clientX - rect.left;
  videoPlayer.currentTime = (clickX / rect.width) * videoPlayer.duration;
});
</script>
</body>
</html>
