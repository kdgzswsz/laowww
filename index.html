<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>æœªå®Œæˆ æµ‹è¯•ä¸­</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%; background: black; overflow: hidden;
    font-family: "Microsoft YaHei", sans-serif; color: white; touch-action: pan-y;
  }

  #introVideo {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;
    z-index: 1000; transition: opacity 0.6s ease;
  }

  #mainContent {
    display: none; height: 100vh; text-align: center; background: linear-gradient(135deg, #0f172a, #1e293b);
    animation: fadeIn 0.6s forwards; overflow-y: auto; -webkit-overflow-scrolling: touch;
  }

  @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
  h1 { padding-top: 20%; font-size: 3em; text-shadow: 0 0 20px #00aaff; }
  a { color: #00aaff; text-decoration: none; font-weight: bold; }

  #soundBtn {
    position: fixed; top: 18px; right: 18px; z-index: 1200; font-size: 28px; cursor: pointer;
    color: white; background: rgba(0,0,0,0.35); border-radius: 50%; padding: 10px;
    transition: background 0.2s, transform 0.5s ease; user-select: none; display: flex;
    align-items: center; justify-content: center; width: 48px; height: 48px;
  }

  #soundBtn:active { transform: scale(0.96); }
  .spin { animation: spin 0.8s linear; }
  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

  #scrollHint {
    position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%);
    z-index: 1100; font-size: 16px; color: #fff; animation: hintPulse 2s infinite;
    transition: opacity 0.4s;
  }

  @keyframes hintPulse { 0%,100% { opacity: 0.25 } 50% { opacity: 1; transform: translate(-50%, -6px) } }

  /* è¿›åº¦æ¡ */
  #progressBar {
    position: fixed; bottom: 0; left: 0; width: 100%; height: 5px; background: rgba(255,255,255,0.15);
    z-index: 1101; cursor: pointer;
  }

  #progress {
    width: 0%; height: 100%; background: linear-gradient(90deg, #00aaff, #33ffcc);
    transition: width 0.05s linear;
  }
</style>
</head>
<body>
  <video id="introVideo" autoplay muted playsinline preload="auto">
    <source src="laow1.mp4" type="video/mp4" />
  </video>

  <button id="soundBtn">ğŸ”‡</button>
  <div id="scrollHint">â†“ ä¸‹æ»‘è¿›å…¥ä¸»é¡µ</div>
  <div id="progressBar"><div id="progress"></div></div>

  <div id="mainContent">
    <h1>æ¬¢è¿æ¥åˆ° ç‰¢www çš„å®˜ç½‘ï¼</h1>
    <p>æˆ‘æ˜¯å­¦ç”ŸUPä¸»ï¼Œçƒ­çˆ±ç¼–ç¨‹ä¸åˆ›ä½œ ğŸ¬</p>
    <p><a href="https://space.bilibili.com/3537115203767153" target="_blank">è®¿é—®æˆ‘çš„Bilibiliä¸»é¡µ</a></p>
    <div style="height:1200px"></div>
  </div>

  <script>
    const video = document.getElementById('introVideo');
    const main = document.getElementById('mainContent');
    const soundBtn = document.getElementById('soundBtn');
    const scrollHint = document.getElementById('scrollHint');
    const progressBar = document.getElementById('progressBar');
    const progress = document.getElementById('progress');

    let showingMain = false;
    let touchStartY = null;
    let longPress = false;
    let pressTimer = null;

    // é»˜è®¤é™éŸ³
    video.muted = true;
    soundBtn.textContent = 'ğŸ”‡';

    // æ›´æ–°è¿›åº¦æ¡ï¼ˆä¸æ»‘ï¼‰
    function updateProgress() {
      if (!video.duration) return;
      progress.style.width = (video.currentTime / video.duration * 100) + '%';
      requestAnimationFrame(updateProgress);
    }
    requestAnimationFrame(updateProgress);

    // æ‹–åŠ¨è¿›åº¦æ¡
    function seek(e) {
      const rect = progressBar.getBoundingClientRect();
      const pos = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
      video.currentTime = pos * video.duration;
    }
    let dragging = false;
    progressBar.addEventListener('mousedown', (e) => { dragging = true; seek(e); });
    window.addEventListener('mousemove', (e) => { if (dragging) seek(e); });
    window.addEventListener('mouseup', () => dragging = false);

    // é•¿æŒ‰åŠ é€Ÿ
    video.addEventListener('pointerdown', () => {
      pressTimer = setTimeout(() => { video.playbackRate = 2; longPress = true; }, 300);
    });
    video.addEventListener('pointerup', () => {
      clearTimeout(pressTimer);
      if (longPress) { video.playbackRate = 1; longPress = false; }
    });

    // å£°éŸ³åˆ‡æ¢
    soundBtn.addEventListener('click', () => {
      video.muted = !video.muted;
      soundBtn.textContent = video.muted ? 'ğŸ”‡' : 'ğŸ”Š';
      soundBtn.classList.remove('spin'); void soundBtn.offsetWidth; soundBtn.classList.add('spin');
      if (!video.muted) video.play().catch(()=>{});
    });

    // ä¸‹æ»‘è¿›å…¥ä¸»é¡µï¼Œä¸Šæ»‘è¿”å›è§†é¢‘
    const SWIPE_THRESHOLD = 60;
    window.addEventListener('wheel', (e) => {
      if (Math.abs(e.deltaY) < 30) return;
      if (e.deltaY > 0 && !showingMain) showMain();
      if (e.deltaY < 0 && showingMain && window.scrollY <= 0) showVideo();
    });

    window.addEventListener('touchstart', (e) => {
      if (e.touches.length === 1) touchStartY = e.touches[0].clientY;
    });
    window.addEventListener('touchend', (e) => {
      if (touchStartY === null) return;
      const diff = e.changedTouches[0].clientY - touchStartY;
      if (diff < -SWIPE_THRESHOLD && !showingMain) showMain();
      if (diff > SWIPE_THRESHOLD && showingMain && window.scrollY <= 0) showVideo();
      touchStartY = null;
    });

    function showMain() {
      if (showingMain) return;
      showingMain = true;
      scrollHint.style.opacity = '0';
      setTimeout(()=>scrollHint.style.display='none',400);
      video.style.opacity = '0';
      setTimeout(()=>{
        video.pause();
        video.style.display='none';
        soundBtn.style.display='none';
        progressBar.style.display='none';
        main.style.display='block';
        document.body.style.overflow='auto';
      },500);
    }

    function showVideo() {
      if (!showingMain) return;
      showingMain = false;
      scrollHint.style.display='block'; scrollHint.style.opacity='1';
      main.style.display='none';
      video.style.display='block'; soundBtn.style.display='flex'; progressBar.style.display='block';
      document.body.style.overflow='hidden';
      video.play().catch(()=>{});
      setTimeout(()=>video.style.opacity='1',50);
    }

    window.addEventListener('keydown',(e)=>{
      if(e.key==='ArrowDown'&&!showingMain)showMain();
      if(e.key==='ArrowUp'&&showingMain&&window.scrollY<=0)showVideo();
    });
  </script>
</body>
</html>

